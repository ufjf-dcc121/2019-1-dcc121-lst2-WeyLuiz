<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <title>Lista 2 Exercício 1</title>
</head>

<body>
    <h1>Lista de Compras</h1>

    <form name="listaCompra">
        <input type="number" name="quantidade">
        <input type="text" name="item">
        <input type="submit">
    </form>
    
    <p></p>
    <button id=limpar>Limpar lista</button>
    <p></p>
    <hi>Itens: <span id="total"></span></hi>

    <ul>

    </ul>

    <script>
        var listaCompras = [];
        var lista = document.getElementsByTagName("ul")[0];
        var botaoLimpar = document.querySelector("#limpar");
        var liTotal = document.getElementById("total");
        liTotal.textContent = lista.children.length;
        var itens = lista.getElementsByTagName('li');
        var i = Number(lista.childElementCount);
        total.textContent = i;
        document.forms.listaCompra.addEventListener("submit", processaEnvio);
        limpar.addEventListener("click", limpaLista);
        function processaEnvio(e) {
            e.preventDefault();
            console.log("Formulário enviado!");
            var quantidade = Number(document.forms.listaCompra.quantidade.value);
            var item = document.forms.listaCompra.item.value;
            console.log(quantidade, item);
            var novaCompra = { "quantidade": quantidade, "item": item };
            listaCompras.push(novaCompra);
            var novoLi = document.createElement("li");
            novoLi.textContent = novaCompra.quantidade + " - " + novaCompra.item;
            lista.appendChild(novoLi);
            liTotal.textContent = lista.children.length;
            document.forms.listaCompra.reset();
            document.forms.listaCompra.quantidade.focus();
        }
        function limpaLista() {
            i = Number(lista.childElementCount);
            while (i > 0) {
                lista.removeChild(itens[0]);
                i--;
                total.textContent = i;
            }
        }
    </script>

</body>

</html>